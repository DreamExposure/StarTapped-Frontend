function generatePostTree(e,t){let n=document.createElement("div");n.className="post-container";let a=[],o=e;for(;"Unassigned"!==o.parent;){let e=getPostFromArray(t,o.parent);if(null==e)break;a.push(e),o=e}let s=null;for(let e=0;e<a.length;e++){let t=a[e],o=null;"TEXT"===t.postType?o=generateTextPost(t,null,!1,!1,!1):"IMAGE"===t.postType?o=generateImagePost(t,null,!1,!1,!1):"AUDIO"===t.postType?o=generateAudioPost(t,null,!1,!1,!1):"VIDEO"===t.postType&&(o=generateVideoPost(t,null,!1,!1,!1)),null==s&&(s=o),n.appendChild(o)}let r=null;if("TEXT"===e.postType?r=generateTextPost(e,null,!1,!0,!0):"IMAGE"===e.postType?r=generateImagePost(e,null,!1,!0,!0):"AUDIO"===e.postType?r=generateAudioPost(e,null,!1,!0,!0):"VIDEO"===e.postType&&(r=generateVideoPost(e,null,!1,!0,!0)),n.appendChild(r),null!=s){let t=s.getElementsByClassName("post-top-bar"),n=s.getElementsByClassName("blog-url-latest")[0],o=s.getElementsByClassName("blog-url-second")[0],r=s.getElementsByClassName("reblog-icon")[0];n.innerHTML=e.originBlog.baseUrl,o.innerHTML=a[0].originBlog.baseUrl,t.style.display="",n.style.display="",o.style.display="",r.style.display="",n.href=e.originBlog.completeUrl,n.target="_blank",o.href=a[0].originBlog.completeUrl,o.target="_blank"}return n}function generateTextPost(e,t,n,a,o){let s=document.createElement("div"),r=document.createElement("div"),l=document.createElement("div"),i=document.createElement("div"),d=document.createElement("a"),p=document.createElement("a"),c=document.createElement("img"),m=document.createElement("h3"),g=document.createElement("p"),h=document.createElement("div"),u=document.createElement("a"),b=document.createElement("img"),k=document.createElement("img");if(s.className="post-container bg-light rounded",r.className="post-top-bar bg-light border-dark rounded-top",l.className="post-contents bg-light",i.className="post-bottom-bar bg-light border-dark rounded-bottom",d.className="blog-url-latest text-link-color underline-solid",p.className="blog-url-second text-link-color underline-solid",c.className="reblog-icon",m.className="post-title text-primary text-center",g.className="post-body text-dark",h.className="post-tag-container",u.className="post-source text-dark underline-solid",b.className="post-bookmark btn-light rounded",k.className="post-reblog btn-light rounded",s.appendChild(r),s.appendChild(l),s.appendChild(i),r.appendChild(d),r.appendChild(c),r.appendChild(p),l.appendChild(m),l.appendChild(g),l.appendChild(h),i.appendChild(u),i.appendChild(b),i.appendChild(k),c.src="https://www.startapped.com/img/icon/reblog_256px.png",d.href="#",p.href="#",u.href="#",e.bookmarked?b.src="https://www.startapped.com/img/icon/bookmark_primary_256px.png":b.src="https://www.startapped.com/img/icon/bookmark_256px.png",k.src="https://www.startapped.com/img/icon/reblog_256px.png",d.innerText=e.originBlog.baseUrl,d.href="#",null!=t?p.innerText=t.originBlog.baseUrl:(c.style.display="none",p.style.display="none"),m.innerHTML=textWithLinks(e.title).replace(/(?:\r\n|\r|\n)/g,"<br>"),g.innerHTML=textWithLinks(e.body).replace(/(?:\r\n|\r|\n)/g,"<br>"),u.innerText="Source: "+e.originBlog.baseUrl,n||(d.style.display="none",p.style.display="none",c.style.display="none",r.style.display="none"),a||(u.style.display="none",b.style.display="none",k.style.display="none",i.style.display="none"),(!o||e.tags.length<=0||e.tags.toString().length<=0)&&(h.style.display="none"),n&&(d.href=e.originBlog.completeUrl,d.target="_blank",null!=t&&(p.href=t.originBlog.completeUrl,p.target="_blank")),a&&(u.href=e.originBlog.completeUrl,u.target="_blank",b.onclick=function(t){let n={post_id:e.id};e.bookmarked?(b.src="https://www.startapped.com/img/icon/bookmark_256px.png",$.ajax({url:"https://api.startapped.com/v1/post/bookmark/remove",headers:{"Content-Type":"application/json",Authorization_Access:getCredentials().access,Authorization_Refresh:getCredentials().refresh},method:"POST",dataType:"json",data:JSON.stringify(n),success:function(t){e.bookmarked=!1,showSnackbar(t.message)},error:function(e,t,n){showSnackbar(JSON.parse(e.responseText).message)}})):(b.src="https://www.startapped.com/img/icon/bookmark_primary_256px.png",$.ajax({url:"https://api.startapped.com/v1/post/bookmark/add",headers:{"Content-Type":"application/json",Authorization_Access:getCredentials().access,Authorization_Refresh:getCredentials().refresh},method:"POST",dataType:"json",data:JSON.stringify(n),success:function(t){e.bookmarked=!0,showSnackbar(t.message)},error:function(e,t,n){showSnackbar(JSON.parse(e.responseText).message)}}))},k.onclick=function(e){}),o&&e.tags.length>0&&e.tags.toString().length>0)for(let t=0;t<e.tags.length;t++){let n=e.tags[t].trim();if(n.length>0){let e=document.createElement("a");e.className="post-tag btn btn-info text-tag-color text-center",e.innerText="#"+n,h.appendChild(e),e.target="_blank",e.href=encodeURI("https://www.startapped.com/search?tags="+n)}}return s}function generateImagePost(e,t,n,a,o){let s=document.createElement("div"),r=document.createElement("div"),l=document.createElement("div"),i=document.createElement("div"),d=document.createElement("a"),p=document.createElement("a"),c=document.createElement("img"),m=document.createElement("h3"),g=document.createElement("p"),h=document.createElement("div"),u=document.createElement("a"),b=document.createElement("img"),k=document.createElement("img"),y=document.createElement("div"),x=document.createElement("img");if(s.className="post-container bg-light rounded",r.className="post-top-bar bg-light border-dark rounded-top",l.className="post-contents bg-light",i.className="post-bottom-bar bg-light border-dark rounded-bottom",d.className="blog-url-latest text-link-color underline-solid",p.className="blog-url-second text-link-color underline-solid",c.className="reblog-icon",m.className="post-title text-primary text-center",g.className="post-body text-dark",h.className="post-tag-container",u.className="post-source text-dark underline-solid",b.className="post-bookmark btn-light rounded",k.className="post-reblog btn-light rounded",y.className="post-image-container",x.className="post-image",s.appendChild(r),s.appendChild(l),s.appendChild(i),r.appendChild(d),r.appendChild(c),r.appendChild(p),y.appendChild(x),l.appendChild(y),l.appendChild(m),l.appendChild(g),l.appendChild(h),i.appendChild(u),i.appendChild(b),i.appendChild(k),c.src="https://www.startapped.com/img/icon/reblog_256px.png",d.href="#",p.href="#",u.href="#",e.bookmarked?b.src="https://www.startapped.com/img/icon/bookmark_primary_256px.png":b.src="https://www.startapped.com/img/icon/bookmark_256px.png",k.src="https://www.startapped.com/img/icon/reblog_256px.png",d.innerText=e.originBlog.baseUrl,d.href="#",null!=t?p.innerText=t.originBlog.baseUrl:(c.style.display="none",p.style.display="none"),m.innerHTML=textWithLinks(e.title).replace(/(?:\r\n|\r|\n)/g,"<br>"),g.innerHTML=textWithLinks(e.body).replace(/(?:\r\n|\r|\n)/g,"<br>"),u.innerText="Source: "+e.originBlog.baseUrl,x.src=e.image.url,x.alt=e.image.name,n||(d.style.display="none",p.style.display="none",c.style.display="none",r.style.display="none"),a||(u.style.display="none",b.style.display="none",k.style.display="none",i.style.display="none"),(!o||e.tags.length<=0||e.tags.toString().length<=0)&&(h.style.display="none"),n&&(d.href=e.originBlog.completeUrl,d.target="_blank",null!=t&&(p.href=t.originBlog.completeUrl,p.target="_blank")),a&&(u.href=e.originBlog.completeUrl,u.target="_blank",b.onclick=function(t){let n={post_id:e.id};e.bookmarked?(b.src="https://www.startapped.com/img/icon/bookmark_256px.png",$.ajax({url:"https://api.startapped.com/v1/post/bookmark/remove",headers:{"Content-Type":"application/json",Authorization_Access:getCredentials().access,Authorization_Refresh:getCredentials().refresh},method:"POST",dataType:"json",data:JSON.stringify(n),success:function(t){e.bookmarked=!1,showSnackbar(t.message)},error:function(e,t,n){showSnackbar(JSON.parse(e.responseText).message)}})):(b.src="https://www.startapped.com/img/icon/bookmark_primary_256px.png",$.ajax({url:"https://api.startapped.com/v1/post/bookmark/add",headers:{"Content-Type":"application/json",Authorization_Access:getCredentials().access,Authorization_Refresh:getCredentials().refresh},method:"POST",dataType:"json",data:JSON.stringify(n),success:function(t){e.bookmarked=!0,showSnackbar(t.message)},error:function(e,t,n){showSnackbar(JSON.parse(e.responseText).message)}}))},k.onclick=function(e){}),o&&e.tags.length>0&&e.tags.toString().length>0)for(let t=0;t<e.tags.length;t++){let n=e.tags[t].trim();if(n.length>0){let e=document.createElement("a");e.className="post-tag btn btn-info text-tag-color text-center",e.innerText="#"+n,h.appendChild(e),e.target="_blank",e.href=encodeURI("https://www.startapped.com/search?tags="+n)}}let f=uuid(),w=document.createElement("div");w.className="modal fade",w.id="modal-"+f,w.role="dialog",s.appendChild(w);let C=document.createElement("div");C.className="modal-dialog",w.appendChild(C);let N=document.createElement("div");N.className="modal-content bg-dark",C.appendChild(N);let E=document.createElement("div");E.className="modal-header",N.appendChild(E);let T=document.createElement("h4");T.className="modal-title text-light",T.innerText="Image",E.appendChild(T);let _=document.createElement("div");_.className="modal-body",N.appendChild(_);let S=document.createElement("img");S.className="post-image",S.src=e.image.url,S.alt=e.image.name,_.appendChild(S);let v=document.createElement("div");v.className="modal-footer",N.appendChild(v);let A=document.createElement("button");A.className="btn btn-primary btn-sm",A.type="button",A.setAttribute("data-dismiss","modal"),v.appendChild(A);let U=document.createElement("img");return U.className="icon-custom-small",U.src="https://www.startapped.com/img/icon/close_256px.png",U.alt="Close",A.appendChild(U),y.setAttribute("data-toggle","modal"),y.setAttribute("data-target","#modal-"+f),s}function generateAudioPost(e,t,n,a,o){let s=document.createElement("div"),r=document.createElement("div"),l=document.createElement("div"),i=document.createElement("div"),d=document.createElement("a"),p=document.createElement("a"),c=document.createElement("img"),m=document.createElement("h3"),g=document.createElement("p"),h=document.createElement("div"),u=document.createElement("a"),b=document.createElement("img"),k=document.createElement("img"),y=document.createElement("div"),x=document.createElement("p"),f=document.createElement("audio"),w=document.createElement("source");if(s.className="post-container bg-light rounded",r.className="post-top-bar bg-light border-dark rounded-top",l.className="post-contents bg-light",i.className="post-bottom-bar bg-light border-dark rounded-bottom",d.className="blog-url-latest text-link-color underline-solid",p.className="blog-url-second text-link-color underline-solid",c.className="reblog-icon",m.className="post-title text-primary text-center",g.className="post-body text-dark",h.className="post-tag-container",u.className="post-source text-dark underline-solid",b.className="post-bookmark btn-light rounded",k.className="post-reblog btn-light rounded",y.className="post-audio-container bg-secondary",x.className="post-audio-name text-dark",f.className="post-audio",s.appendChild(r),s.appendChild(l),s.appendChild(i),r.appendChild(d),r.appendChild(c),r.appendChild(p),l.appendChild(y),l.appendChild(m),l.appendChild(g),l.appendChild(h),i.appendChild(u),i.appendChild(b),i.appendChild(k),y.appendChild(x),y.appendChild(f),f.appendChild(w),c.src="https://www.startapped.com/img/icon/reblog_256px.png",d.href="#",p.href="#",u.href="#",e.bookmarked?b.src="https://www.startapped.com/img/icon/bookmark_primary_256px.png":b.src="https://www.startapped.com/img/icon/bookmark_256px.png",k.src="https://www.startapped.com/img/icon/reblog_256px.png",w.innerText="Your browser does not support the Audio Tag",d.innerText=e.originBlog.baseUrl,d.href="#",null!=t?p.innerText=t.originBlog.baseUrl:(c.style.display="none",p.style.display="none"),m.innerHTML=textWithLinks(e.title).replace(/(?:\r\n|\r|\n)/g,"<br>"),g.innerHTML=textWithLinks(e.body).replace(/(?:\r\n|\r|\n)/g,"<br>"),u.innerText="Source: "+e.originBlog.baseUrl,n||(d.style.display="none",p.style.display="none",c.style.display="none",r.style.display="none"),a||(u.style.display="none",b.style.display="none",k.style.display="none",i.style.display="none"),(!o||e.tags.length<=0||e.tags.toString().length<=0)&&(h.style.display="none"),n&&(d.href=e.originBlog.completeUrl,d.target="_blank",null!=t&&(p.href=t.originBlog.completeUrl,p.target="_blank")),a&&(u.href=e.originBlog.completeUrl,u.target="_blank",b.onclick=function(t){let n={post_id:e.id};e.bookmarked?(b.src="https://www.startapped.com/img/icon/bookmark_256px.png",$.ajax({url:"https://api.startapped.com/v1/post/bookmark/remove",headers:{"Content-Type":"application/json",Authorization_Access:getCredentials().access,Authorization_Refresh:getCredentials().refresh},method:"POST",dataType:"json",data:JSON.stringify(n),success:function(t){e.bookmarked=!1,showSnackbar(t.message)},error:function(e,t,n){showSnackbar(JSON.parse(e.responseText).message)}})):(b.src="https://www.startapped.com/img/icon/bookmark_primary_256px.png",$.ajax({url:"https://api.startapped.com/v1/post/bookmark/add",headers:{"Content-Type":"application/json",Authorization_Access:getCredentials().access,Authorization_Refresh:getCredentials().refresh},method:"POST",dataType:"json",data:JSON.stringify(n),success:function(t){e.bookmarked=!0,showSnackbar(t.message)},error:function(e,t,n){showSnackbar(JSON.parse(e.responseText).message)}}))},k.onclick=function(e){}),o&&e.tags.length>0&&e.tags.toString().length>0)for(let t=0;t<e.tags.length;t++){let n=e.tags[t].trim();if(n.length>0){let e=document.createElement("a");e.className="post-tag btn btn-info text-tag-color text-center",e.innerText="#"+n,h.appendChild(e),e.target="_blank",e.href=encodeURI("https://www.startapped.com/search?tags="+n)}}return x.innerText="File Name: "+e.audio.name,f.setAttribute("controls",""),f.setAttribute("loop",""),w.src=e.audio.url,document.addEventListener("scroll",function(){f.paused||isPostVisible(s,!1)||f.pause()},!0),s}function generateVideoPost(e,t,n,a,o){let s=document.createElement("div"),r=document.createElement("div"),l=document.createElement("div"),i=document.createElement("div"),d=document.createElement("a"),p=document.createElement("a"),c=document.createElement("img"),m=document.createElement("h3"),g=document.createElement("p"),h=document.createElement("div"),u=document.createElement("a"),b=document.createElement("img"),k=document.createElement("img"),y=document.createElement("div"),x=document.createElement("video"),f=document.createElement("source");if(s.className="post-container bg-light rounded",r.className="post-top-bar bg-light border-dark rounded-top",l.className="post-contents bg-light",i.className="post-bottom-bar bg-light border-dark rounded-bottom",d.className="blog-url-latest text-link-color underline-solid",p.className="blog-url-second text-link-color underline-solid",c.className="reblog-icon",m.className="post-title text-primary text-center",g.className="post-body text-dark",h.className="post-tag-container",u.className="post-source text-dark underline-solid",b.className="post-bookmark btn-light rounded",k.className="post-reblog btn-light rounded",y.className="post-video-container bg-secondary",x.className="post-video",s.appendChild(r),s.appendChild(l),s.appendChild(i),r.appendChild(d),r.appendChild(c),r.appendChild(p),l.appendChild(y),l.appendChild(m),l.appendChild(g),l.appendChild(h),i.appendChild(u),i.appendChild(b),i.appendChild(k),y.appendChild(x),x.appendChild(f),c.src="https://www.startapped.com/img/icon/reblog_256px.png",d.href="#",p.href="#",u.href="#",e.bookmarked?b.src="https://www.startapped.com/img/icon/bookmark_primary_256px.png":b.src="https://www.startapped.com/img/icon/bookmark_256px.png",k.src="https://www.startapped.com/img/icon/reblog_256px.png",f.innerText="Your browser does not support the Video Tag",d.innerText=e.originBlog.baseUrl,d.href="#",null!=t?p.innerText=t.originBlog.baseUrl:(c.style.display="none",p.style.display="none"),m.innerHTML=textWithLinks(e.title).replace(/(?:\r\n|\r|\n)/g,"<br>"),g.innerHTML=textWithLinks(e.body).replace(/(?:\r\n|\r|\n)/g,"<br>"),u.innerText="Source: "+e.originBlog.baseUrl,n||(d.style.display="none",p.style.display="none",c.style.display="none",r.style.display="none"),a||(u.style.display="none",b.style.display="none",k.style.display="none",i.style.display="none"),(!o||e.tags.length<=0||e.tags.toString().length<=0)&&(h.style.display="none"),n&&(d.href=e.originBlog.completeUrl,d.target="_blank",null!=t&&(p.href=t.originBlog.completeUrl,p.target="_blank")),a&&(u.href=e.originBlog.completeUrl,u.target="_blank",b.onclick=function(t){let n={post_id:e.id};e.bookmarked?(b.src="https://www.startapped.com/img/icon/bookmark_256px.png",$.ajax({url:"https://api.startapped.com/v1/post/bookmark/remove",headers:{"Content-Type":"application/json",Authorization_Access:getCredentials().access,Authorization_Refresh:getCredentials().refresh},method:"POST",dataType:"json",data:JSON.stringify(n),success:function(t){e.bookmarked=!1,showSnackbar(t.message)},error:function(e,t,n){showSnackbar(JSON.parse(e.responseText).message)}})):(b.src="https://www.startapped.com/img/icon/bookmark_primary_256px.png",$.ajax({url:"https://api.startapped.com/v1/post/bookmark/add",headers:{"Content-Type":"application/json",Authorization_Access:getCredentials().access,Authorization_Refresh:getCredentials().refresh},method:"POST",dataType:"json",data:JSON.stringify(n),success:function(t){e.bookmarked=!0,showSnackbar(t.message)},error:function(e,t,n){showSnackbar(JSON.parse(e.responseText).message)}}))},k.onclick=function(e){}),o&&e.tags.length>0&&e.tags.toString().length>0)for(let t=0;t<e.tags.length;t++){let n=e.tags[t].trim();if(n.length>0){let e=document.createElement("a");e.className="post-tag btn btn-info text-tag-color text-center",e.innerText="#"+n,h.appendChild(e),e.target="_blank",e.href=encodeURI("https://www.startapped.com/search?tags="+n)}}return x.setAttribute("controls",""),x.setAttribute("loop",""),f.src=e.video.url,document.addEventListener("scroll",function(){x.paused||isPostVisible(s,!1)||x.pause()},!0),s}function getPostFromArray(e,t){for(let n=0;n<e.length;n++){let a=e[n];if(a.id===t)return a}return null}function uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function textWithLinks(e){return e.replace(/(?:(?:https?|ftp|file):\/\/|www\.|ftp\.)(?:\([-A-Z0-9+&@#\/%=~_|$?!:,.]*\)|[-A-Z0-9+&@#\/%=~_|$?!:,.])*(?:\([-A-Z0-9+&@#\/%=~_|$?!:,.]*\)|[A-Z0-9+&@#\/%=~_|$])/gim,function(e){return'<a href="'+e+'" target="_blank" class="text-link-color">'+e+"</a>"})}function isPostVisible(e,t){let n=$(window).scrollTop(),a=n+$(window).height(),o=$(e).offset().top,s=o+$(e).height();return!0===t?n<o&&a>s:o<=a&&s>=n}