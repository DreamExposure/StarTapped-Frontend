function getAllBlogsSelf(){$.ajax({url:"https://api.startapped.com/v1/blog/get",headers:{"Content-Type":"application/json",Authorization_Access:getCredentials().access,Authorization_Refresh:getCredentials().refresh},method:"POST",dataType:"json",data:JSON.stringify({all:!0}),success:function(e){let t=document.getElementById("blog-container");for(;t.firstChild;)t.removeChild(t.firstChild);for(let a=0;a<e.count;a++){let n=(new Blog).fromJson(e.blogs[a]),d=document.createElement("div");d.className="column blog-container rounded",d.id="blog-"+n.id,d.style.backgroundColor=n.backgroundColor,t.appendChild(d);let l=document.createElement("img");l.className="blog-header-img rounded-top",l.src=n.backgroundImage.url,l.alt=n.backgroundImage.name,d.appendChild(l);let o=document.createElement("a");o.className="text-link-color underline-solid blog-link",o.href=n.completeUrl,o.target="_blank",o.innerHTML=n.baseUrl,d.appendChild(o);let c=document.createElement("img");c.className="blog-edit-button",c.setAttribute("data-toggle","modal"),c.setAttribute("data-target","#modal-"+n.id),c.alt="Edit",c.src="/img/icon/edit_256px.png",d.appendChild(c);let i=document.createElement("img");if(i.className="blog-profile-img rounded",i.src=n.iconImage.url,i.alt=n.iconImage.name,d.appendChild(i),n.nsfw){let e=document.createElement("span");e.className="blog-nsfw-badge badge badge-danger",e.innerHTML="NSFW",d.appendChild(e)}if(!n.allowUnder18){let e=document.createElement("span");e.className="blog-18-only-badge badge badge-danger",e.innerHTML="18+ Only",d.appendChild(e)}if("PERSONAL"===n.blogType&&n.displayAge){let e=document.createElement("span");e.className="blog-age-badge badge badge-danger",showAgeSelf(e),d.appendChild(e)}let r=document.createElement("h3");r.className="blog-title text-primary font-weight-bold",r.innerHTML=n.name.replace(/(?:\r\n|\r|\n)/g,"<br>"),d.appendChild(r);let s=document.createElement("p");s.className="blog-desc text-dark",s.innerHTML=n.description.replace(/(?:\r\n|\r|\n)/g,"<br>"),d.appendChild(s);let m=document.createElement("div");m.className="modal fade",m.id="modal-"+n.id,m.role="dialog",d.appendChild(m);let p=document.createElement("div");p.className="modal-dialog",m.appendChild(p);let u=document.createElement("div");u.className="modal-content bg-dark",p.appendChild(u);let g=document.createElement("div");g.className="modal-header",u.appendChild(g);let h=document.createElement("h4");h.className="modal-title text-light",h.innerHTML="Editing "+n.baseUrl,g.appendChild(h);let b=document.createElement("div");b.className="modal-body",u.appendChild(b);let C=document.createElement("form");b.appendChild(C);let E=document.createElement("label");E.className="text-light edit-blog-title-label",E.innerHTML="Title",E.appendChild(document.createElement("br")),C.appendChild(E);let f=document.createElement("textarea");f.className="edit-blog-title-box",f.name="title",f.rows=2,f.value=n.name,f.id="edit-title-"+n.id,E.appendChild(f),C.appendChild(document.createElement("br"));let N=document.createElement("label");N.className="text-light edit-blog-desc-label",N.innerHTML="Description",N.appendChild(document.createElement("br")),C.appendChild(N);let y=document.createElement("textarea");y.className="edit-blog-desc-box",y.name="edit-description",y.rows=4,y.value=n.description,y.id="edit-description-"+n.id,N.appendChild(y),C.appendChild(document.createElement("br"));let k=document.createElement("label");k.className="text-light",k.innerHTML="Icon Image",k.appendChild(document.createElement("br")),C.appendChild(k);let T=document.createElement("input");T.className="rounded",T.name="edit-icon-image",T.type="file",T.id="edit-icon-image-"+n.id,T.onchange=function(e){encodeImageFileAsBase64(this)},k.appendChild(T),C.appendChild(document.createElement("br"));let x=document.createElement("label");x.className="text-light",x.innerHTML="Background Color",x.appendChild(document.createElement("br")),C.appendChild(x);let A=document.createElement("input");A.className="rounded",A.name="background-color",A.type="color",A.value=n.backgroundColor,A.id="edit-background-color-"+n.id,x.appendChild(A),C.appendChild(document.createElement("br"));let w=document.createElement("label");w.className="text-light",w.innerHTML="Background Image",w.appendChild(document.createElement("br")),C.appendChild(w);let S=document.createElement("input");S.className="rounded",S.name="edit-background-image",S.type="file",S.id="edit-background-image-"+n.id,S.onchange=function(e){encodeImageFileAsBase64(this)},w.appendChild(S),C.appendChild(document.createElement("br"));let v=document.createElement("label");v.className="text-light",v.innerHTML="Contains NSFW Content",v.appendChild(document.createElement("br")),C.appendChild(v);let B=document.createElement("input");B.className="rounded",B.name="nsfw",B.type="checkbox",B.checked=n.nsfw,B.id="edit-nsfw-"+n.id,v.appendChild(B),C.appendChild(document.createElement("br"));let _=document.createElement("label");_.className="text-light",_.innerHTML="Allow Minors To View Blog",_.appendChild(document.createElement("br")),C.appendChild(_);let I=document.createElement("input");if(I.className="rounded",I.name="under_18",I.type="checkbox",I.checked=n.allowUnder18,I.id="edit-under-18-"+n.id,_.appendChild(I),C.appendChild(document.createElement("br")),"PERSONAL"===n.blogType){let e=document.createElement("label");e.className="text-light",e.innerHTML="Display your age",e.appendChild(document.createElement("br")),C.appendChild(e);let t=document.createElement("input");t.className="rounded",t.name="show_age",t.type="checkbox",t.checked=n.displayAge,t.id="edit-display-age-"+n.id,e.appendChild(t),C.appendChild(document.createElement("br"))}let L=document.createElement("button");L.className="btn btn-primary",L.type="button",L.id="edit.submit."+n.id,L.innerHTML="Confirm Edits!",L.onclick=function(e){updateBlog(this.id)},C.appendChild(L);let M=document.createElement("div");M.className="modal-footer",u.appendChild(M);let H=document.createElement("button");H.className="btn btn-primary btn-sm",H.type="button",H.setAttribute("data-dismiss","modal"),M.appendChild(H);let O=document.createElement("img");O.className="icon-custom-small",O.src="/img/icon/close_256px.png",O.alt="Close",H.appendChild(O)}t.appendChild(document.createElement("br")),t.appendChild(document.createElement("br"))},error:function(e,t,a){showSnackbar(JSON.parse(e.responseText).message)}})}function createNewBlog(e){let t={url:document.getElementById("blog-create-url").value,type:"PERSONAL",gcap:grecaptcha.getResponse(e)};$.ajax({url:"https://api.startapped.com/v1/blog/create",headers:{"Content-Type":"application/json",Authorization_Access:getCredentials().access,Authorization_Refresh:getCredentials().refresh},method:"POST",dataType:"json",data:JSON.stringify(t),success:function(e){grecaptcha.reset(),$("#modal-create-blog").modal("hide"),showSnackbar(e.message),getAllBlogsSelf()},error:function(e,t,a){showSnackbar(JSON.parse(e.responseText).message),grecaptcha.reset()}})}function updateBlog(e){let t=e.split(".")[2],a={id:t,name:document.getElementById("edit-title-"+t).value,description:document.getElementById("edit-description-"+t).value,nsfw:document.getElementById("edit-nsfw-"+t).checked,allow_under_18:document.getElementById("edit-under-18-"+t).checked,background_color:document.getElementById("edit-background-color-"+t).value};hasEncodedResults("edit-icon-image-"+t)&&(a.icon_image=getEncodedResults("edit-icon-image-"+t)),hasEncodedResults("edit-background-image-"+t)&&(a.background_image=getEncodedResults("edit-background-image-"+t)),null!==document.getElementById("edit-display-age-"+t)&&(a.display_age=document.getElementById("edit-display-age-"+t).checked),$.ajax({url:"https://api.startapped.com/v1/blog/update",headers:{"Content-Type":"application/json",Authorization_Access:getCredentials().access,Authorization_Refresh:getCredentials().refresh},method:"POST",dataType:"json",data:JSON.stringify(a),success:function(e){$("#modal-"+t).modal("hide"),showSnackbar(e.message),removeEncodedResults("edit-icon-image-"+t),removeEncodedResults("edit-background-image-"+t),getAllBlogsSelf()},error:function(e,t,a){showSnackbar(JSON.parse(e.responseText).message)}})}function showAgeSelf(e){$.ajax({url:"https://api.startapped.com/v1/account/get",headers:{"Content-Type":"application/json",Authorization_Access:getCredentials().access,Authorization_Refresh:getCredentials().refresh},method:"POST",dataType:"json",success:function(t){let a=(new Account).fromJson(t.account);e.innerText=a.age},error:function(e,t,a){showSnackbar(JSON.parse(e.responseText).message)}})}